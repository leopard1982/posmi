{% load static %}
<div class="h3 ms-4 mt-3 fw-bold">
    <span>Update Pengguna ({{pengguna.username}})</span>
</div>
<div class="ms-4">
    Kasir &rarr; Daftar Pengguna &rarr; Update Pengguna
</div>
<div class="justify-content-end d-flex">
    <button class="btn btn-sm btn-primary" hx-get="{% url 'daftar_kasir'%}" hx-trigger="click" hx-target="#mainpage">Daftar Pengguna &rarr;</button>
</div>
<div class="container my-2">
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-primary alert-dismissible fade show " role="alert">
            <button type="button" class=" btn" data-bs-dismiss="alert" aria-label="Close">X</button>    
            <span>{{message}}</span>
                
        </div>
        
        {% endfor %}
    {% endif %}
</div>
<div class="bg-white p-3 p-3">
    <table class="table bg-white w-100">
        <tr>
            <th style="width: 200px;max-width: 200px;">
                {% if pengguna.userprofile.foto %}
                    <img class="img-profile rounded-circle " style="height: 200px;width: 200px; padding:20px" src="{{pengguna.userprofile.foto.url}}">
                {% else %}
                    <img class="img-profile rounded-circle w-100" src="{% static 'img/undraw_profile.svg'%}" >
                {% endif %}
            </th>
            <td>
                <div>Ganti Foto Profile</div>
                <form action="" enctype="multipart/form-data" method="post" hx-post="{% url 'update_foto'%}?id={{pengguna.id}}" hx-target="#mainpage" hx-trigger="submit" method="post">
                    {% csrf_token %}
                    <input type="file"  required name="foto" id="" class="form-control " accept=".gif,.png,.jpg,.jpeg,.webp,.bmp" style="height: 50px;">
                    <div class="mt-3">
                        <button type="submit" class="px-3 btn btn-sm btn-info">Ganti Foto</button>
                    </div>
                </form>
                
            </td>
        </tr>
        <tr>
            <th></th>
            <td>
                <div>Nama Pengguna:</div>
                <form action="" enctype="multipart/form-data" method="post" hx-post="{% url 'update_nama'%}?id={{pengguna.id}}" hx-target="#mainpage" hx-trigger="submit" method="post">
                    {% csrf_token %}
                    <input type="text"  required name="pengguna" maxlength="30" id="" class="form-control " placeholder="nama pengguna" value="{{pengguna.userprofile.nama_lengkap|title}}">
                    <div class="mt-3">
                        <button type="submit" class="px-3 btn btn-sm btn-info">Ganti Nama</button>
                    </div>
                </form>
            </td>
        </tr>
        <tr>
            <th></th>
            <td>
                <div>Password Pengguna:</div>
                <form action="" enctype="multipart/form-data" method="post" hx-post="{% url 'update_password'%}?id={{pengguna.id}}" hx-target="#mainpage" hx-trigger="submit" method="post">
                    {% csrf_token %}
                    <input type="password"  required name="password1" id="" class="form-control " placeholder="password baru" >
                    <input type="password"  required name="password2" id="" class="form-control " placeholder="konfirmasi password" >
                    <div class="mt-3">
                        <button type="submit" class="px-3 btn btn-sm btn-info">Ganti Password</button>
                    </div>
                </form>
            </td>
        </tr>
    </table>
</div>
